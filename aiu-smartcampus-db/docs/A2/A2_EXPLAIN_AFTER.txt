EXPLAIN
-> Sort: total_seconds DESC  (actual time=0.409..0.409 rows=3 loops=1)\n    -> Table scan on <temporary>  (actual time=0.395..0.395 rows=3 loops=1)\n        -> Aggregate using temporary table  (actual time=0.393..0.393 rows=3 loops=1)\n            -> Filter: ((al.student_id = 1) and (al.`timestamp` >= <cache>((now() - interval 30 day))))  (cost=1.7 rows=4) (actual time=0.295..0.3 rows=4 loops=1)\n                -> Covering index range scan on al using idx_activity_cover_report over (student_id = 1 AND '2025-12-07 15:38:10.000' <= timestamp)  (cost=1.7 rows=4) (actual time=0.29..0.293 rows=4 loops=1)\n
EXPLAIN
-> Sort: r1.`timestamp`  (actual time=0.672..0.678 rows=167 loops=1)\n    -> Stream results  (cost=85.2 rows=168) (actual time=0.276..0.637 rows=167 loops=1)\n        -> Nested loop inner join  (cost=85.2 rows=168) (actual time=0.275..0.616 rows=167 loops=1)\n            -> Nested loop inner join  (cost=26.6 rows=168) (actual time=0.264..0.293 rows=167 loops=1)\n                -> Nested loop inner join  (cost=0.7 rows=1) (actual time=0.0183..0.0196 rows=1 loops=1)\n                    -> Covering index lookup on s_temp using idx_sensors_room_type (room_id=1, sensor_type='temperature')  (cost=0.35 rows=1) (actual time=0.0141..0.0145 rows=1 loops=1)\n                    -> Covering index lookup on s_occ using idx_sensors_room_type (room_id=1, sensor_type='occupancy')  (cost=0.35 rows=1) (actual time=0.00351..0.00434 rows=1 loops=1)\n                -> Index lookup on r1 using uq_sensor_readings (sensor_id=s_temp.sensor_id), with index condition: (r1.`timestamp` between <cache>((now() - interval 7 day)) and <cache>(now()))  (cost=25.7 rows=168) (actual time=0.246..0.265 rows=167 loops=1)\n            -> Single-row index lookup on r2 using uq_sensor_readings (sensor_id=s_occ.sensor_id, timestamp=r1.`timestamp`)  (cost=0.251 rows=1) (actual time=0.00179..0.00181 rows=1 loops=167)\n
EXPLAIN
-> Limit: 20 row(s)  (actual time=8.75..8.75 rows=0 loops=1)\n    -> Sort: avg_score, total_activity_seconds  (actual time=8.75..8.75 rows=0 loops=1)\n        -> Filter: ((avg_score < 60) or (total_activity_seconds < 1800))  (actual time=8.74..8.74 rows=0 loops=1)\n            -> Stream results  (cost=2818 rows=3257) (actual time=0.6..8.68 rows=200 loops=1)\n                -> Group aggregate: sum(al.session_duration), avg(scp.final_score), count(distinct e.course_id)  (cost=2818 rows=3257) (actual time=0.594..8.55 rows=200 loops=1)\n                    -> Nested loop left join  (cost=2018 rows=8000) (actual time=0.504..6.3 rows=8000 loops=1)\n                        -> Nested loop left join  (cost=431 rows=800) (actual time=0.491..2.2 rows=800 loops=1)\n                            -> Nested loop inner join  (cost=151 rows=800) (actual time=0.483..0.999 rows=800 loops=1)\n                                -> Sort: s.student_id, s.reg_no  (cost=20.8 rows=200) (actual time=0.317..0.343 rows=200 loops=1)\n                                    -> Filter: (s.`status` = 'active')  (cost=20.8 rows=200) (actual time=0.027..0.112 rows=200 loops=1)\n                                        -> Table scan on s  (cost=20.8 rows=200) (actual time=0.0252..0.0845 rows=200 loops=1)\n                                -> Covering index lookup on e using PRIMARY (student_id=s.student_id)  (cost=0.253 rows=4) (actual time=0.00231..0.00299 rows=4 loops=200)\n                            -> Single-row index lookup on scp using PRIMARY (student_id=s.student_id, course_id=e.course_id)  (cost=0.25 rows=1) (actual time=0.00135..0.00137 rows=1 loops=800)\n                        -> Filter: (al.`timestamp` >= <cache>((now() - interval 90 day)))  (cost=0.985 rows=10) (actual time=0.00263..0.00449 rows=10 loops=800)\n                            -> Covering index lookup on al using idx_activity_cover_report (student_id=s.student_id)  (cost=0.985 rows=10) (actual time=0.00248..0.00365 rows=10 loops=800)\n

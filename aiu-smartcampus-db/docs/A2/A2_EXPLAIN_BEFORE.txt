EXPLAIN
-> Sort: total_seconds DESC  (actual time=3.2..3.2 rows=3 loops=1)\n    -> Table scan on <temporary>  (actual time=2.42..2.42 rows=3 loops=1)\n        -> Aggregate using temporary table  (actual time=2.41..2.41 rows=3 loops=1)\n            -> Filter: (al.`timestamp` >= <cache>((now() - interval 30 day)))  (cost=1.08 rows=3.33) (actual time=0.24..0.248 rows=4 loops=1)\n                -> Index lookup on al using fk_activity_student (student_id=1)  (cost=1.08 rows=10) (actual time=0.127..0.142 rows=10 loops=1)\n
EXPLAIN
-> Sort: r1.`timestamp`  (actual time=3.77..3.78 rows=167 loops=1)\n    -> Stream results  (cost=30 rows=26.9) (actual time=2.83..3.33 rows=167 loops=1)\n        -> Nested loop inner join  (cost=30 rows=26.9) (actual time=2.57..3.03 rows=167 loops=1)\n            -> Nested loop inner join  (cost=26.5 rows=26.9) (actual time=2.51..2.55 rows=167 loops=1)\n                -> Nested loop inner join  (cost=0.9 rows=0.16) (actual time=0.108..0.121 rows=1 loops=1)\n                    -> Filter: (s_temp.sensor_type = 'temperature')  (cost=0.54 rows=0.4) (actual time=0.0814..0.0854 rows=1 loops=1)\n                        -> Index lookup on s_temp using fk_sensors_room (room_id=1)  (cost=0.54 rows=4) (actual time=0.0794..0.0824 rows=4 loops=1)\n                    -> Filter: (s_occ.sensor_type = 'occupancy')  (cost=0.6 rows=0.4) (actual time=0.00904..0.0178 rows=1 loops=1)\n                        -> Index lookup on s_occ using fk_sensors_room (room_id=1)  (cost=0.6 rows=4) (actual time=0.00699..0.0125 rows=4 loops=1)\n                -> Index lookup on r1 using uq_sensor_readings (sensor_id=s_temp.sensor_id), with index condition: (r1.`timestamp` between <cache>((now() - interval 7 day)) and <cache>(now()))  (cost=20.7 rows=168) (actual time=2.4..2.43 rows=167 loops=1)\n            -> Single-row index lookup on r2 using uq_sensor_readings (sensor_id=s_occ.sensor_id, timestamp=r1.`timestamp`)  (cost=0.283 rows=1) (actual time=0.00269..0.00272 rows=1 loops=167)\n
EXPLAIN
-> Limit: 20 row(s)  (actual time=21.7..21.7 rows=0 loops=1)\n    -> Sort: avg_score, total_activity_seconds  (actual time=21.7..21.7 rows=0 loops=1)\n        -> Filter: ((avg_score < 60) or (total_activity_seconds < 1800))  (actual time=21.7..21.7 rows=0 loops=1)\n            -> Stream results  (actual time=18.6..21.6 rows=200 loops=1)\n                -> Group aggregate: sum(activity_logs.session_duration), avg(student_course_performance.final_score), count(distinct enrollments.course_id)  (actual time=18.6..21.2 rows=200 loops=1)\n                    -> Sort: s.student_id, s.reg_no  (actual time=18.3..18.9 rows=8000 loops=1)\n                        -> Stream results  (cost=16003 rows=160000) (actual time=1.42..7.36 rows=8000 loops=1)\n                            -> Left hash join (al.student_id = s.student_id)  (cost=16003 rows=160000) (actual time=1.42..5.64 rows=8000 loops=1)\n                                -> Nested loop left join  (cost=61.8 rows=80) (actual time=0.147..3.72 rows=800 loops=1)\n                                    -> Nested loop inner join  (cost=33.8 rows=80) (actual time=0.0805..1.97 rows=800 loops=1)\n                                        -> Filter: (s.`status` = 'active')  (cost=20.8 rows=20) (actual time=0.0422..0.2 rows=200 loops=1)\n                                            -> Table scan on s  (cost=20.8 rows=200) (actual time=0.0386..0.145 rows=200 loops=1)\n                                        -> Covering index lookup on e using PRIMARY (student_id=s.student_id)  (cost=0.271 rows=4) (actual time=0.00719..0.00854 rows=4 loops=200)\n                                    -> Single-row index lookup on scp using PRIMARY (student_id=s.student_id, course_id=e.course_id)  (cost=0.251 rows=1) (actual time=0.00202..0.00204 rows=1 loops=800)\n                                -> Hash\n                                    -> Filter: (al.`timestamp` >= <cache>((now() - interval 90 day)))  (cost=2.5 rows=2000) (actual time=0.13..0.879 rows=2000 loops=1)\n                                        -> Table scan on al  (cost=2.5 rows=2000) (actual time=0.117..0.712 rows=2000 loops=1)\n
